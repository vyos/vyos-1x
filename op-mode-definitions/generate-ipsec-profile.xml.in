<?xml version="1.0"?>
<interfaceDefinition>
  <node name="generate">
    <children>
      <node name="ipsec">
        <properties>
          <help>Generate IPsec related configurations</help>
        </properties>
        <children>
          <tagNode name="mac-ios-profile">
            <properties>
              <help>Generate Apple iOS profile from IPsec connection profile</help>
              <completionHelp>
                <path>vpn ipsec remote-access connection</path>
              </completionHelp>
            </properties>
            <children>
              <tagNode name="remote">
                <properties>
                  <help>Remote address where the client will connect to</help>
                  <completionHelp>
                    <list>&lt;fqdn&gt;</list>
                    <script>${vyos_completion_dir}/list_local_ips.sh --both</script>
                  </completionHelp>
                </properties>
                <command>${vyos_op_scripts_dir}/ikev2_profile_generator.py --connection "$4" --remote "$6"</command>
                <children>
                  <tagNode name="name">
                    <properties>
                      <help>Connection name as seen in the VPN application</help>
                      <completionHelp>
                        <list>&lt;name&gt;</list>
                      </completionHelp>
                    </properties>
                    <command>${vyos_op_scripts_dir}/ikev2_profile_generator.py --connection "$4" --remote "$6" --name "$8"</command>
                    <children>
                      <tagNode name="profile">
                        <properties>
                          <help>Profile name as seen under system profiles</help>
                          <completionHelp>
                            <list>&lt;name&gt;</list>
                          </completionHelp>
                        </properties>
                        <command>${vyos_op_scripts_dir}/ikev2_profile_generator.py --connection "$4" --remote "$6" --name "$8" --profile "${10}"</command>
                      </tagNode>
                    </children>
                  </tagNode>
                  <tagNode name="profile">
                    <properties>
                      <help>Profile name as seen under system profiles</help>
                      <completionHelp>
                        <list>&lt;name&gt;</list>
                      </completionHelp>
                    </properties>
                    <command>${vyos_op_scripts_dir}/ikev2_profile_generator.py --connection "$4" --remote "$6" --profile "$8"</command>
                    <children>
                      <tagNode name="name">
                        <properties>
                          <help>Connection name as seen in the VPN application</help>
                          <completionHelp>
                            <list>&lt;name&gt;</list>
                          </completionHelp>
                        </properties>
                        <command>${vyos_op_scripts_dir}/ikev2_profile_generator.py --connection "$4" --remote "$6" --profile "$8" --name "${10}"</command>
                      </tagNode>
                    </children>
                  </tagNode>
                </children>
              </tagNode>
            </children>
          </tagNode>
        </children>
      </node>
    </children>
  </node>
</interfaceDefinition>
