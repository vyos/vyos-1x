### generated by accel_pptp.py ###
[modules]
log_syslog
pptp
shaper
{% if auth_mode == 'local' %}
chap-secrets
{% elif auth_mode == 'radius' %}
radius
{% endif %}
ippool
{% for proto in auth_proto %}
{{ proto }}
{% endfor %}

[core]
thread-count={{ thread_cnt }}

[log]
syslog=accel-pptp,daemon
copy=1
level=5

{% if dnsv4 %}
[dns]
{%     for dns in dnsv4 %}
dns{{ loop.index }}={{ dns }}
{%     endfor %}
{% endif %}

{% if wins %}
[wins]
{%     for server in wins %}
wins{{ loop.index }}={{ server }}
{%     endfor %}
{% endif %}


[pptp]
ifname=pptp%d
{% if outside_addr %}
bind={{ outside_addr }}
{% endif %}
verbose=1
ppp-max-mtu={{ mtu }}
mppe={{ ppp_mppe }}
echo-interval=10
echo-failure=3


[client-ip-range]
0.0.0.0/0

[ip-pool]
tunnel={{ client_ip_pool }}
gw-ip-address={{ gw_ip }}

[ppp]
verbose=5
check-ip=1
single-session=replace

{% if auth_mode == 'local' %}
[chap-secrets]
chap-secrets={{ chap_secrets_file }}
{% elif auth_mode == 'radius' %}
[radius]
verbose=1
{%     for r in radius_server %}
server={{ r.server }},{{ r.key }},auth-port={{ r.port }},acct-port={{ r.acct_port }},req-limit=0,fail-time={{ r.fail_time }}
{%     endfor %}

{%     if radius_acct_inter_jitter %}
acct-interim-jitter={{ radius_acct_inter_jitter }}
{%     endif %}

acct-timeout={{ radius_acct_tmo }}
timeout={{ radius_timeout }}
max-try={{ radius_max_try }}

{%     if radius_nas_id %}
nas-identifier={{ radius_nas_id }}
{%     endif %}
{%     if radius_nas_ip %}
nas-ip-address={{ radius_nas_ip }}
{%     endif %}
{%     if radius_source_address %}
bind={{ radius_source_address }}
{%     endif %}
{% endif %}
{# Both chap-secrets and radius block required the gw-ip-address #}
{% if gw_ip is defined and gw_ip is not none %}
gw-ip-address={{ gw_ip }}
{% endif %}

{% if radius_shaper_attr %}
[shaper]
verbose=1
attr={{ radius_shaper_attr }}
{%     if radius_shaper_vendor %}
vendor={{ radius_shaper_vendor }}
{%     endif %}
{% endif %}

[cli]
tcp=127.0.0.1:2003

